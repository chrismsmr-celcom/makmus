<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Météo - Makmus</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
        <!-- FAVICON -->
      <link rel="icon" type="image/png" sizes="32x32" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-32.png">
      <!-- Favicon standard -->
      <link rel="icon" type="image/png" sizes="16x16" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-16.png">
      <link rel="icon" type="image/png" sizes="32x32" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-32.png">
      <link rel="icon" type="image/png" sizes="48x48" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-48.png">
      <!-- iOS -->
      <link rel="apple-touch-icon" sizes="57x57" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-57.png">
      <link rel="apple-touch-icon" sizes="60x60" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-60.png">
      <link rel="apple-touch-icon" sizes="72x72" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-72.png">
      <link rel="apple-touch-icon" sizes="76x76" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-76.png">
      <link rel="apple-touch-icon" sizes="114x114" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-114.png">
      <link rel="apple-touch-icon" sizes="120x120" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-120.png">
      <link rel="apple-touch-icon" sizes="144x144" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-144.png">
      <link rel="apple-touch-icon" sizes="152x152" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-152.png">
      <!-- Android / Chrome -->
      <link rel="icon" type="image/png" sizes="192x192" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-192.png">
      <link rel="icon" type="image/png" sizes="256x256" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-256.png">
      <link rel="icon" type="image/png" sizes="512x512" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001-512.png">
      <!-- Favicon .ico pour IE et desktop -->
      <link rel="shortcut icon" href="https://i.postimg.cc/x88LbhZp/2-20251224-213424-0001.ico" type="image/x-icon">

<style>
/* RESET LÉGER */
* {
  box-sizing: border-box;
}

body { 
  margin: 0; 
  font-family: 'Inter', system-ui, sans-serif; 
  background: #f5f6f7;
  color: #111; 
}

/* HEADER */
header { 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  padding: 0.8rem 1.5rem; 
  background: #fff; 
  border-bottom: 1px solid #e5e5e5;
}

header .logo img { 
  height: 36px; 
}

header nav ul { 
  list-style: none; 
  display: flex; 
  gap: 1rem; 
  margin: 0; 
  padding: 0; 
}

header nav a { 
  text-decoration: none; 
  color: #111; 
  font-size: 0.9rem;
  font-weight: 500; 
}

/* PAGE */
.weather-page { 
  padding: 1.5rem 1rem 2rem; 
  max-width: 1200px; 
  margin: auto; 
}

/* SEARCH */
#searchForm { 
  display: flex; 
  gap: 0.5rem; 
  margin-bottom: 1.5rem;
}

#searchInput { 
  flex: 1; 
  padding: 0.7rem 0.8rem; 
  border-radius: 10px; 
  border: 1px solid #ccc;
  font-size: 0.9rem;
}

#searchBtn { 
  padding: 0.7rem 1.2rem; 
  border: none; 
  background: #111; 
  color: #fff; 
  border-radius: 10px; 
  cursor: pointer;
  font-size: 0.9rem;
}

/* MÉTÉO ACTUELLE */
#weather-container { 
  display: flex; 
  justify-content: center; 
  margin-bottom: 2rem; 
}

.weather-card { 
  background: #fff; 
  padding: 1.5rem; 
  border-radius: 16px; 
  box-shadow: 0 8px 24px rgba(0,0,0,0.08); 
  width: 100%;
  max-width: 360px;
  text-align: center;
}

.weather-card h3 { 
  margin: 0 0 0.5rem; 
  font-size: 1.2rem;
}

.weather-card p { 
  margin: 0.4rem 0; 
  font-size: 0.9rem;
  color: #333;
}

/* TITRE PRÉVISIONS */
.weather-page h2 {
  text-align: center;
  font-size: 1.2rem;
  margin-bottom: 1rem;
}

/* PRÉVISIONS */
#forecast-container { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); 
  gap: 1rem; 
  margin-bottom: 2rem; 
}

.forecast-card { 
  background: #fff; 
  padding: 0.9rem; 
  border-radius: 14px; 
  box-shadow: 0 4px 12px rgba(0,0,0,0.06); 
  text-align: center;
  font-size: 0.8rem;
}

.forecast-card strong {
  display: block;
  margin-bottom: 0.3rem;
  font-weight: 600;
}

/* DONNÉES CLIMATIQUES */
.climate-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.climate-card {
  background: #fff;
  padding: 1rem;
  border-radius: 14px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.06);
  text-align: center;
  font-size: 0.85rem;
}

.climate-card strong {
  display: block;
  margin-bottom: 0.3rem;
  font-weight: 600;
  color: #111;
}

/* MAP */
#map { 
  height: 380px; 
  width: 100%; 
  border-radius: 16px; 
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
  overflow: hidden;
}

/* MOBILE */
@media (max-width: 768px) {

  header nav {
    display: none; /* simple et clean sur mobile */
  }

  .weather-card {
    max-width: 100%;
  }

  #map {
    height: 300px;
  }
}

</style>
</head>
<body>

<header>
  <div class="logo"><img src="https://i.postimg.cc/7ZWdGrQc/Screenshot_2025_12_24_21_32_24_removebg_preview.png" alt="Makmus"></div>
  <nav>
    <ul>
      <li><a href="index.html">Accueil</a></li>
      <li><a href="meteo.html">Météo</a></li>
      <li><a href="politique.html">Politique</a></li>
      <li><a href="sport.html">Sport</a></li>
      <li><a href="musique.html">Musique</a></li>
      <li><a href="jeux.html">Jeux</a></li>
    </ul>
  </nav>
</header>

<div class="weather-page">
  <form id="searchForm">
    <input type="text" id="searchInput" placeholder="Chercher une ville ou un pays"/>
    <button type="submit" id="searchBtn">Rechercher</button>
  </form>

  <div id="weather-container"></div>

  <h2>Prévisions 7 jours</h2>
  <div id="forecast-container"></div>

  <h2>Données climatiques</h2>
  <div id="climate-container" class="climate-container"></div>

  <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const weatherContainer = document.getElementById('weather-container');
const forecastContainer = document.getElementById('forecast-container');
const climateContainer = document.getElementById('climate-container');
const searchForm = document.getElementById('searchForm');
const searchInput = document.getElementById('searchInput');

// Carte Leaflet
const map = L.map('map').setView([-4.4419, 15.2663], 6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution:'© OpenStreetMap'
}).addTo(map);

// Fonction pour récupérer et afficher météo
async function fetchWeather(city){
  try {
    const geoRes = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1`);
    const geoData = await geoRes.json();
    if(!geoData.results || !geoData.results.length) return alert("Ville non trouvée");

    const {latitude, longitude, name, country} = geoData.results[0];
    map.setView([latitude, longitude], 8);

    const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode,precipitation_sum,windspeed_10m_max&timezone=auto`);
    const weatherData = await weatherRes.json();

    renderWeatherCard({name, country, weatherData});
    renderForecast(weatherData.daily);
    renderClimate(weatherData);

  } catch(e){
    console.error(e);
    alert("Erreur lors de la récupération de la météo.");
  }
}

function renderWeatherCard({name,country,weatherData}){
  weatherContainer.innerHTML = '';
  const card = document.createElement('div');
  card.className = 'weather-card';
  const weather = weatherData.current_weather;
  card.innerHTML = `
    <h3>${name}, ${country}</h3>
    <p>Température actuelle : ${weather.temperature}°C</p>
    <p>Vitesse du vent : ${weather.windspeed} km/h</p>
    <p>Code météo : ${weatherLabel(weather.weathercode)}</p>
  `;
  weatherContainer.appendChild(card);
}

function renderForecast(daily){
  forecastContainer.innerHTML = '';
  for(let i=0; i<daily.time.length; i++){
    const card = document.createElement('div');
    card.className = 'forecast-card';
    card.innerHTML = `
      <p><strong>${daily.time[i]}</strong></p>
      <p>Min: ${daily.temperature_2m_min[i]}°C</p>
      <p>Max: ${daily.temperature_2m_max[i]}°C</p>
      <p>Pluie: ${daily.precipitation_sum[i]} mm</p>
      <p>Vent: ${daily.windspeed_10m_max[i]} km/h</p>
    `;
    forecastContainer.appendChild(card);
  }
}

function renderClimate(weatherData){
  climateContainer.innerHTML = '';
  const current = weatherData.current_weather;
  const daily = weatherData.daily;

  const climateItems = [
    { label: "Température max", value: `${daily.temperature_2m_max[0]}°C` },
    { label: "Température min", value: `${daily.temperature_2m_min[0]}°C` },
    { label: "Vent max", value: `${daily.windspeed_10m_max[0]} km/h` },
    { label: "Précipitations", value: `${daily.precipitation_sum[0]} mm` },
    { label: "Code météo", value: `${weatherLabel(current.weathercode)}` }
  ];

  climateItems.forEach(item => {
    const card = document.createElement('div');
    card.className = 'climate-card';
    card.innerHTML = `<strong>${item.label}</strong><span>${item.value}</span>`;
    climateContainer.appendChild(card);
  });
}

function weatherLabel(code) {
  const map = {
    0: "Ciel dégagé",
    1: "Plutôt dégagé",
    2: "Partiellement nuageux",
    3: "Nuageux",
    45: "Brouillard",
    61: "Pluie légère",
    63: "Pluie modérée",
    65: "Forte pluie",
    80: "Averses"
  };
  return map[code] || "Conditions variables";
}

// Recherche par formulaire
searchForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  const city = searchInput.value.trim();
  if(city) fetchWeather(city);
});

// GEOLOCALISATION AUTO
if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(pos => {
    const {latitude, longitude} = pos.coords;
    fetchWeatherByCoords(latitude, longitude);
  }, () => {
    fetchWeather("Kinshasa"); // fallback
  });
} else {
  fetchWeatherByLocation();
}

async function fetchWeatherByCoords(lat, lon){
  try {
    const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode,precipitation_sum,windspeed_10m_max&timezone=auto`);
    const weatherData = await weatherRes.json();
    const geoRes = await fetch(`https://geocoding-api.open-meteo.com/v1/reverse?latitude=${lat}&longitude=${lon}`);
    const geoData = await geoRes.json();
    const name = geoData.results[0]?.name || "Localisation";
    const country = geoData.results[0]?.country || "";
    map.setView([lat, lon], 8);
    renderWeatherCard({name, country, weatherData});
    renderForecast(weatherData.daily);
    renderClimate(weatherData);
  } catch(e){
    console.error(e);
    alert("Erreur lors de la récupération de la météo.");
  }
}
</script>

</body>
</html>



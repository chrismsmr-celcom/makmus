<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Météo - Makmus</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>

body { 
  margin:0; 
  font-family:sans-serif; 
  background:#fff; /* fond blanc neutre */
  color:#000; 
}
header { 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  padding:1rem 2rem; 
  background:#fff; 
  box-shadow:0 2px 4px rgba(0,0,0,0.1); 
}
header .logo img { height:40px; }
header nav ul { list-style:none; display:flex; gap:1rem; margin:0; padding:0; }
header nav a { text-decoration:none; color:#000; font-weight:500; }

.weather-page { padding:2rem; max-width:1200px; margin:auto; }
#searchForm { display:flex; margin-bottom:1rem; gap:0.5rem; }
#searchInput { flex:1; padding:0.5rem; border-radius:6px; border:1px solid #ccc; }
#searchBtn { padding:0.5rem 1rem; border:none; background:#000; color:#fff; border-radius:6px; cursor:pointer; }

#weather-container { display:flex; flex-wrap:wrap; gap:2rem; justify-content:center; margin-bottom:2rem; }
.weather-card { background:#f9f9f9; padding:1rem 1.5rem; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); width:300px; text-align:center; }
.weather-card h3 { margin:0.5rem 0; }
.weather-card p { margin:0.25rem 0; }

#forecast-container { display:flex; flex-wrap:wrap; gap:1rem; justify-content:center; margin-bottom:2rem; }
.forecast-card { background:#f9f9f9; padding:0.8rem 1rem; border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1); width:120px; text-align:center; }

#map { height:400px; width:100%; border-radius:12px; }

@media(max-width:768px) { 
  #weather-container, #forecast-container { flex-direction:column; align-items:center; } 
}

</style>
  <script async 
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7567982675325882"
    crossorigin="anonymous">
  </script>
</head>
<body>

<header>
  <div class="logo"><img src="https://i.postimg.cc/7ZWdGrQc/Screenshot_2025_12_24_21_32_24_removebg_preview.png" alt="Makmus"></div>
  <nav>
    <ul>
      <li><a href="index.html">Accueil</a></li>
      <li><a href="meteo.html">Météo</a></li>
      <li><a href="politique.html">Politique</a></li>
      <li><a href="sport.html">Sport</a></li>
      <li><a href="musique.html">Musique</a></li>
      <li><a href="jeux.html">Jeux</a></li>
    </ul>
  </nav>
</header>

<div class="weather-page">
  <form id="searchForm">
    <input type="text" id="searchInput" placeholder="Chercher une ville ou un pays"/>
    <button type="submit" id="searchBtn">Rechercher</button>
  </form>

  <div id="weather-container"></div>
  <h2 style="text-align:center;">Prévisions 7 jours</h2>
  <div id="forecast-container"></div>

  <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const weatherContainer = document.getElementById('weather-container');
const forecastContainer = document.getElementById('forecast-container');
const searchForm = document.getElementById('searchForm');
const searchInput = document.getElementById('searchInput');

// Carte Leaflet
const map = L.map('map').setView([-4.4419, 15.2663], 6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution:'© OpenStreetMap'
}).addTo(map);

async function fetchWeather(city){
  try {
    const geoRes = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1`);
    const geoData = await geoRes.json();
    if(!geoData.results || !geoData.results.length) return alert("Ville non trouvée");

    const {latitude, longitude, name, country} = geoData.results[0];
    map.setView([latitude, longitude], 8);

    const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,weathercode,precipitation_sum,windspeed_10m_max&timezone=auto`);
    const weatherData = await weatherRes.json();
    renderWeatherCard({name,country,weatherData});
    renderForecast(weatherData.daily);
  } catch(e){
    console.error(e);
    alert("Erreur lors de la récupération de la météo.");
  }
}

function renderWeatherCard({name,country,weatherData}){
  weatherContainer.innerHTML = '';
  const card = document.createElement('div');
  card.className = 'weather-card';
  const weather = weatherData.current_weather;
  card.innerHTML = `
    <h3>${name}, ${country}</h3>
    <p>Température actuelle : ${weather.temperature}°C</p>
    <p>Vitesse du vent : ${weather.windspeed} km/h</p>
    <p>Code météo : ${weather.weathercode}</p>
  `;
  weatherContainer.appendChild(card);
}

function renderForecast(daily){
  forecastContainer.innerHTML = '';
  for(let i=0; i<daily.time.length; i++){
    const card = document.createElement('div');
    card.className = 'forecast-card';
    card.innerHTML = `
      <p><strong>${daily.time[i]}</strong></p>
      <p>Min: ${daily.temperature_2m_min[i]}°C</p>
      <p>Max: ${daily.temperature_2m_max[i]}°C</p>
      <p>Pluie: ${daily.precipitation_sum[i]} mm</p>
      <p>Vent: ${daily.windspeed_10m_max[i]} km/h</p>
    `;
    forecastContainer.appendChild(card);
  }
}

searchForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  const city = searchInput.value.trim();
  if(city) fetchWeather(city);
});

// Initialisation RDC
fetchWeather("Kinshasa");
</script>

</body>
</html>


